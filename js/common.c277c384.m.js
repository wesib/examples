import{_ as e,$ as t,a0 as n,a1 as o,a2 as r,G as s,a3 as a,t as i,a4 as l,a as d,a5 as c,S as u,a6 as h,X as p,a7 as f,Y as g,k as $,D as m,l as b,L as y,f as x,a8 as _,H as v,a9 as k}from"./lib.1f6bc097.m.js";import{A as w,R as C,P as S,C as z,D as R,T as F,a as W,F as D,b as L,c as H,N,p as O,B,i as E,d as T,e as V,f as j,g as A,S as I,h as G,j as M}from"./wesib.4f84b7c8.m.js";const P=new e("https://wesib.github.io/examples","bex","wesib-examples"),U=t.by({$:"settings"},{$color:new n({r:161,g:185,b:142}),$bgColor:new n({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:o.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:r.of(576,"px")});function X({$layoutBreakpoint:e}){return{"@media:sm":`(max-width: ${e})`}}function Y(e){const t=e.ref(U).read.keep,n={e:"a"};return e.root.rules.add(n,t.thru(q)),e.root.rules.add({e:"a",s:":visited"},t.thru(q)),e.root.rules.add({e:"a",s:":hover"},{textDecoration:"underline"}),e.root.rules.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),e.root.rules.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}),e.root.rules.grab(n)}function q({$color:e,$linkFontWeight:t}){return{color:e,fontWeight:t,textDecoration:"none"}}function J(e){const t=e.ref(U).read.keep;return e.root.add(t.thru(K)),e.root.add(t.thru(X)),s(e.root.rules.self,e.style(Y))}function K({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:r}){return{color:e,font:`normal ${r} ${n}/${o} ${t}`}}const Q=["display-block",P];function Z(e){const t=e.ref(U).read.keep,n={e:"body"},o={e:"html"},{root:{rules:r}}=e;return r.add(n,t.thru(ee)),r.add(o,{height:"100%",margin:0,padding:0}),r.add({c:Q},{display:"block !important"}),s(r.grab(o),r.grab(n),r.grab({c:Q}),e.style(J))}function ee({$bgColor:e}){return{backgroundColor:e,height:"100%",margin:0,padding:0}}const te=t.by({$:"settings:form"},e=>a.by({global:U},e).read.keep.thru(ne));function ne({global:{$color:e,$bgColor:t,$fontFace:n,$fontSize:o,$lineHeight:s,$fontWeight:a}}){return{$color:e,$bgColor:t.hsl.set(({l:e})=>({l:.8*e})),$roBgColor:t.hsl.set(({l:e})=>({l:.94*e})),$fontFace:n,$fontSize:o,$errorFontSize:o.mul(.8),$lineHeight:s,$fontWeight:a,$borderColor:t,$marginV:o.div(4),$marginH:o.div(4),$paddingV:o.div(2),$paddingH:o,$borderW:r.of(1,"px")}}const oe=new u("error-receiver");class re{constructor(){this._result=i(l()),this.read=this._result.read}static get[d](){return oe}enable({control:e}){return e.aspect(c).read(e=>this._result.it=e).whenOff(()=>this._result.it=l())}}let se=class{constructor(e){this._context=e,this._validationResult=l(),this._codes=new Set;const t=e.get(re);e.whenOn(e=>{t.read(e=>this.validationResult=e).needs(e).whenOff(()=>this.validationResult=l())})}get validationResult(){return this._validationResult}set validationResult(e){const t=this._validationResult;this._validationResult=e,this._context.updateState("validationResult",e,t)}setCode(e){this._codes=new Set(e.trim().split(/\s+/))}render(){const e=this._context.element,t=p.name(Q,this._context.get(R));return()=>{f(this._codes,e=>!this.validationResult.has(e))?e.classList.remove(t):e.classList.add(t)}}style(){const e=o.of(4,"px"),t=this._context.get(F).ref(te).read.keep;return g(t.thru(({$color:t,$errorFontSize:n})=>({display:"none",fontSize:n,padding:n.div(2),borderLeft:`${e} dotted ${t}`,paddingLeft:n.sub(e)}))).rules}};h([w("code")],se.prototype,"setCode",null),h([C()],se.prototype,"render",null),h([S()],se.prototype,"style",null),se=h([z({name:["in-error",P],setup(e){e.perComponent({as:re}),e.perComponent({a:W,by:e=>$(t=>e.enable(t)),with:[re]})}})],se);let ae=class{};ae=h([D({needs:[L,se,H]})],ae);let ie=class{constructor(e){this._context=e,this._response=i(),this._response.on((t,n)=>e.updateState("response",t,n));const t=e.get(N);e.whenOn(n=>{t.read.once(t=>{t.put(O,{fragment:{tag:e.element.tagName},receiver:{supply:n,receive:(e,t)=>this._response.it=t}})})})}render(){const e=this._context.get(B).document,t=e.createRange();return t.selectNodeContents(this._context.element),()=>{const n=this._response.it;if(n)if(t.deleteContents(),n.ok){const o=e.createDocumentFragment(),{fragment:r}=n;r&&(E(r,o),t.insertNode(o))}else null==n.ok?t.insertNode(e.createTextNode("Loading...")):t.insertNode(e.createTextNode(`Error. ${n.error}`))}}style(){const e=this._context.get(F).ref(U).read.keep;return g(e.thru(le)).rules}};function le({$fontSize:e}){return{padding:0,margin:`0 0 0 ${e.div(2)}`}}h([C()],ie.prototype,"render",null),h([S()],ie.prototype,"style",null),ie=h([z({name:["main",P]})],ie);const de=["nav-active",P];let ce=class{constructor(e){this._theme=e.get(F);const t=e.get(R),n=p.name(de,t),o=e.get(T),r=e.get(N);e.whenOn(e=>{const t=o.select("a",{all:!0}),s=new Map;t.track.tillOff(e)((t,o)=>{o.forEach(e=>{const t=s.get(e);t&&(s.delete(e),t.off())}),t.forEach(t=>{const o=t.element,a=new m(o).on("click").instead(()=>{o.classList.contains(n)||r.open(o.getAttribute("href")||"")}).needs(e);s.set(t,a)})}),b({links:t,page:r})({supply:e,receive(e,{links:[t],page:[o]}){const r=ue(o.url);let s,a="";t.forEach(e=>{const t=e.element,o=ue(new URL(t.href));t.classList.remove(n),r.startsWith(o)&&a.length<o.length&&(s=t,a=o)}),s&&s.classList.add(n)}})})}style(){const e=this._theme.ref(U).read.keep,t=g(e.thru(he));return t.rules.add({e:"a"},e.thru(fe)),t.rules.add({e:"a",c:de},e.thru(ge)),t.rules}};function ue(e){const t=e.pathname;return t.endsWith("/")?t:t+"/"}function he({$fontSize:e}){return{padding:0,margin:`0 ${e.div(2)} 0 0`}}function pe({$bgColor:e}){return e.hsl.set(({l:e})=>({l:.8*e}))}function fe(e){const{$fontSize:t}=e;return{display:"block",margin:0,padding:`${t.div(2)} ${t}`,border:0,outline:0,background:pe(e)}}function ge({$fontSize:e,$color:t,$bgColor:n}){const r=o.of(4,"px");return{background:n,borderLeft:`${r} solid ${t}`,paddingLeft:e.sub(r)}}h([S()],ce.prototype,"style",null),ce=h([z({name:["nav",P]})],ce);let $e=class{constructor(e){this._context=e}async style(){const e=this._context.get(V),{elementDef:{name:t}}=await e.whenDefined(ce),{elementDef:{name:n}}=await e.whenDefined(ie),o=this._context.get(F).ref(U).read.keep,{rules:r}=g({height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(o.thru(X));return r.add({s:" ",$:"@media:sm"},{height:"auto"}),r.add({e:t},o.thru(e=>({flex:"0 1 200px",height:"100%",background:pe(e)}))),r.add({e:t,$:"@media:sm"},{flex:"0 1 100%"}),r.add({e:n},o.thru(({$fontSize:e})=>({flex:"1 1 auto",margin:e}))),r}};h([S()],$e.prototype,"style",null),$e=h([z({name:["container",P],feature:{needs:[ie,ce]}})],$e);let me=class{};me=h([D({needs:[$e,L,j,A,I,H]})],me);let be=class{};be=h([D({needs:H,init:function(e){e.whenReady(()=>{y(e.get(F).style(Z))})}})],be);let ye=class{};ye=h([D({needs:[be,ae,me]})],ye);let xe=class{constructor(e){this._control=i(),this.control=this._control.read;const t=e.get(G),n=e.get(T);e.whenOn(e=>{const o=x().needs(e);let r=v();n.select(this.inputSelector(),{all:!0,deep:!0}).first({supply:o,receive:(e,t)=>{this._control.it=t&&this.nodeControl(t)}}),this._control.read({supply:o,receive:(e,n)=>{r.off(),n&&(r=t.enable(n).needs(o).whenOff(()=>this._control.it=void 0))}})})}inputStyle(){return g({display:"block"}).rules}inputSelector(){return"input"}nodeControl(e){return _(e.element)}};function _e(e){const t=e.ref(te).read.keep,{root:{rules:n}}=e;return n.add({e:"input"},t.thru(ve)),n.add({e:"input",s:"[readonly]"},t.thru(ke)),n.add({e:"input",s:"[disabled]"},t.thru(ke)),n.add({e:"input",s:":focus"},t.thru(we)),n.add({e:"input",c:["inap-invalid","inap-touched"]},t.thru(Ce)),n.add({e:"input",c:["inap-missing","inap-touched"]},{outlineStyle:"dotted"}),n.add({e:"input",c:["inap-incomplete","inap-touched"]},{outlineStyle:"dotted"}),n.grab({e:"input"})}function ve({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:r,$marginV:s,$marginH:a,$paddingV:i,$paddingH:l,$bgColor:d,$borderColor:c,$borderW:u}){return{color:e,font:`normal ${r} ${n}/${o} ${t}`,padding:`${i} ${l}`,margin:`${s} ${a}`,backgroundColor:d,border:"0 none",outline:`${u} solid ${c}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function ke({$roBgColor:e}){return{backgroundColor:e}}function we({$color:e,$borderColor:t}){return{outlineColor:k(t,e,.5)}}function Ce({$color:e,$borderW:t,$borderColor:n}){return{outline:`${t.mul(2)} dashed ${k(n,e,.25)}`}}h([S()],xe.prototype,"inputStyle",null),xe=h([z({name:["in-element",P],setup:G.setup})],xe);const Se=M(ye);export{ye as A,P as B,J as D,te as F,xe as I,U as T,_e as a,Se as e,ve as i,ke as r};
//# sourceMappingURL=common.c277c384.m.js.map
