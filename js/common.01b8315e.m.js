import{a3 as e,a5 as t,a6 as o,a7 as n,a8 as r,K as s,a9 as a,aa as i,t as d,f as l,ab as c,ac as u,ad as h,ae as $,af as g,u as f,a0 as p,D as b,U as m,ag as x}from"./lib.9b748507.m.js";import{P as y,C as k,H as v,I as w,D as C,T as _,A as S,F as z,a as F,b as W,R as D,N as H,p as L,B as N,i as E,c as B,d as R,e as T,f as V,S as A,g as I}from"./wesib.36d35637.m.js";const O=new e("https://wesib.github.io/examples","bex","wesib-examples"),j=t.by({$:"settings"},{$color:new o({r:161,g:185,b:142}),$bgColor:new o({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:n.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:r.of(576,"px")});function U({$layoutBreakpoint:e}){return{"@media:sm":`(max-width: ${e})`}}function K(e){const t=e.ref(j).read.keep,{root:{rules:o}}=e;return s(o.add({e:"a"},t.thru(M)),o.add({e:"a",s:":visited"},t.thru(M)),o.add({e:"a",s:":hover"},{textDecoration:"underline"}),o.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),o.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function M({$color:e,$linkFontWeight:t}){return{color:e,fontWeight:t,textDecoration:"none"}}function P(e){const t=e.ref(j).read.keep;return s(e.root.add(t.thru(q)).add(t.thru(U)),e.style(K))}function q({$color:e,$fontFace:t,$fontSize:o,$lineHeight:n,$fontWeight:r}){return{color:e,font:`normal ${r} ${o}/${n} ${t}`}}function G(e){const t=e.ref(j).read.keep,{root:{rules:o}}=e;return s(o.add({e:"html"},{height:"100%",margin:0,padding:0}),o.add({e:"body"},t.thru(J)),e.style(P))}function J({$bgColor:e}){return{backgroundColor:e,height:"100%",margin:0,padding:0}}const Q=t.by({$:"settings:form"},e=>a.by({global:j},e).read.keep.thru(X));function X({global:{$color:e,$bgColor:t,$fontFace:o,$fontSize:n,$lineHeight:s,$fontWeight:a}}){return{$color:e,$bgColor:t.hsl.set(({l:e})=>({l:.8*e})),$roBgColor:t.hsl.set(({l:e})=>({l:.94*e})),$fontFace:o,$fontSize:n,$errorFontSize:n.mul(.8),$lineHeight:s,$fontWeight:a,$borderColor:t,$marginV:n.div(4),$marginH:n.div(4),$paddingV:n.div(2),$paddingH:n,$borderW:r.of(1,"px")}}let Y=class{constructor(e){this._context=e,this._codes=d(),l({control:this._context.get(v).get(w),aspects:this._context.get(C),when:this._codes}).consume(({control:[{control:t}],aspects:[o],when:[n]})=>{if(!t)return;const r=f();return t.convert(c.to(e.element),o).setup(u,e=>{e.add(h()).needs(r),e.add($({when:n})).needs(r)}),r})}setCode(e){this._codes.it=e?e.trim().split(/\s+/):[]}style(){return this._context.get(_).style(ee)}};i([S("code")],Y.prototype,"setCode",null),i([y()],Y.prototype,"style",null),Y=i([k(["in-error",O])],Y);const Z=["has-error",g];function ee(e){const t=e.ref(Q).read.keep,{root:{rules:o}}=e,r=n.of(4,"px");return s(o.add({u:[":","host"],$:"bex:in-error"},t.thru(({$color:e,$errorFontSize:t})=>({display:"none",fontSize:t,padding:t.div(2),borderLeft:`${r} dotted ${e}`,paddingLeft:t.sub(r)}))),o.add({u:[":","host",{c:[Z,["touched",g]],u:[":","not",{c:["has-focus",g]}]}],$:"bex:in-error"},{display:"block"}),o.add({u:[":","host",{c:Z,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}let te=class{};te=i([z({needs:[F,Y,W]})],te);let oe=class{constructor(e){this._context=e,this._response=d(),this._response.on((t,o)=>e.updateState("response",t,o));const t=e.get(H);e.whenOn(o=>{t.read.once(t=>{t.put(L,{fragment:{tag:e.element.tagName},receiver:{supply:o,receive:(e,t)=>this._response.it=t}})})})}render(){const e=this._context.get(N).document,t=e.createRange();return t.selectNodeContents(this._context.element),()=>{const o=this._response.it;if(o)if(t.deleteContents(),o.ok){const n=e.createDocumentFragment(),{fragment:r}=o;r&&(E(r,n),t.insertNode(n))}else null==o.ok?t.insertNode(e.createTextNode("Loading...")):t.insertNode(e.createTextNode(`Error. ${o.error}`))}}};function ne({$fontSize:e}){return{flex:"1 1 auto",padding:0,margin:`0 0 0 ${e.div(2)}`}}i([D()],oe.prototype,"render",null),oe=i([k(["main",O])],oe);let re=class{constructor(e){this._theme=e.get(_);const t=e.get(B),o=p.name(de,t),n=e.get(R),r=e.get(H);e.whenOn(e=>{const t=n.select("a",{all:!0}),s=new Map;t.track.tillOff(e)((t,n)=>{n.forEach(e=>{const t=s.get(e);t&&(s.delete(e),t.off())}),t.forEach(t=>{const n=t.element,a=new b(n).on("click").instead(()=>{n.classList.contains(o)||r.open(n.getAttribute("href")||"")}).needs(e);s.set(t,a)})}),l({links:t,page:r})({supply:e,receive(e,{links:[t],page:[n]}){const r=se(n.url);let s,a="";t.forEach(e=>{const t=e.element,n=se(new URL(t.href));t.classList.remove(o),r.startsWith(n)&&a.length<n.length&&(s=t,a=n)}),s&&s.classList.add(o)}})})}style(){return this._theme.style(ae)}};function se(e){const t=e.pathname;return t.endsWith("/")?t:t+"/"}i([y()],re.prototype,"style",null),re=i([k(["nav",O])],re);function ae(e){const t=e.ref(j).read.keep,{root:{rules:o}}=e;return s(o.add({u:[":","host"],$:"bex:nav"},t.thru(ie)),o.add({u:[":","host"],$:"bex:nav"},t.thru(e=>({flex:"0 1 200px",height:"100%",background:le(e)}))),o.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),o.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],t.thru(ce)),o.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:de,$:"bex:nav"}],t.thru(ue)))}function ie({$fontSize:e}){return{padding:0,margin:`0 ${e.div(2)} 0 0`}}const de=["nav-active",O];function le({$bgColor:e}){return e.hsl.set(({l:e})=>({l:.8*e}))}function ce(e){const{$fontSize:t}=e;return{display:"block",margin:0,padding:`${t.div(2)} ${t}`,border:0,outline:0,background:le(e)}}function ue({$fontSize:e,$color:t,$bgColor:o}){const r=n.of(4,"px");return{background:o,borderLeft:`${r} solid ${t}`,paddingLeft:e.sub(r)}}let he=class{constructor(e){this._context=e}async style(){const{elementDef:{name:e}}=await this._context.get(T).whenDefined(oe);return this._context.get(_).style(function(e){return t=>{const o=t.ref(j).read.keep,{root:{rules:n}}=t;return s(n.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(o.thru(U)),n.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),n.add([{u:[":","host"],$:"bex:container"},{e,$:"bex:container"}],o.thru(ne)))}}(e))}};i([y()],he.prototype,"style",null),he=i([k({name:["container",O],feature:{needs:[oe,re]}})],he);let $e=class{};$e=i([z({needs:[he,F,V,A,W]})],$e);let ge=class{};ge=i([z({needs:W,init:function(e){e.whenReady(()=>{m(e.get(_).style(G))})}})],ge);let fe=class{};function pe(e){const t=e.ref(Q).read.keep,{root:{rules:o}}=e;return s(o.add({e:"input"},t.thru(be)),o.add({e:"input",s:"[readonly]"},t.thru(me)),o.add({e:"input",s:"[disabled]"},t.thru(me)),o.add({e:"input",s:":focus"},t.thru(xe)),o.add({e:"input",c:[["invalid",g],["touched",g]]},t.thru(ye)),o.add({e:"input",c:[["missing",g],["touched",g]]},{outlineStyle:"dotted"}),o.add({e:"input",c:[["incomplete",g],["touched",g]]},{outlineStyle:"dotted"}))}function be({$color:e,$fontFace:t,$fontSize:o,$lineHeight:n,$fontWeight:r,$marginV:s,$marginH:a,$paddingV:i,$paddingH:d,$bgColor:l,$borderColor:c,$borderW:u}){return{color:e,font:`normal ${r} ${o}/${n} ${t}`,padding:`${i} ${d}`,margin:`${s} ${a}`,backgroundColor:l,border:"0 none",outline:`${u} solid ${c}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function me({$roBgColor:e}){return{backgroundColor:e}}function xe({$color:e,$borderColor:t}){return{outlineColor:x(t,e,.5)}}function ye({$color:e,$borderW:t,$borderColor:o}){return{outline:`${t.mul(2)} dashed ${x(o,e,.25)}`}}fe=i([z({needs:[ge,te,$e]})],fe);const ke=I(fe);export{fe as A,P as D,O as E,Q as F,pe as I,j as T,ke as e,be as i,me as r};
//# sourceMappingURL=common.01b8315e.m.js.map
